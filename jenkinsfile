pipeline 
{
    agent any

    stages 
	{
	
	
		stage('git clone')
				{ 
					steps
					{
						git 'https://github.com/sadgurukgp/maven-project'

					}	

				}
		
		
		
    
      		 

                stage ('install Stage') 
		{
            steps
			{
                withMaven(maven : 'gpmvn') 
				{
                    sh 'mvn install'
                }
            }
        }
        stage ('deploy to tom')
		{
             steps 
			{
                  
						sshagent (['tomcat']) 
							{
								sh 'scp -o StrictHostKeyChecking=no */target/*.war ec2-user@172.31.45.93:/var/lib/tomcat/webapps'
							}
					
			}


		}

	
	}
 }
 
